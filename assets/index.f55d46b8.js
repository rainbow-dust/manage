import{x as A,f as W,u as K,_ as B}from"./index.140309e9.js";/* empty css               *//* empty css              *//* empty css              */import{c as S,d as F,e as y,a_ as k,B as h,aD as x,aG as a,aH as e,C as q,aJ as Z,aI as Q,u as g,F as I,E as N,bt as X,bA as Y,bB as tt,bC as et,bD as w,bE as $,aL as L,bF as G,bG as V,aM as T,aE as at,bH as ot,K as st,b8 as H,bI as nt,bJ as rt,bK as lt}from"./arco.bbdacfc8.js";/* empty css              */import{u as z}from"./loading.b4b50533.js";/* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                */import"./chart.6ce23b19.js";import"./vue.67b87df8.js";function it(){return A.post("/api/statistics/popular-author/list")}function ct(){return A.post("/api/statistics/period-grouped-notes")}function ut(){return A.post("/api/statistics/data-overview")}function pt(){const v=W();return{isDark:S(()=>v.theme==="dark")}}function P(v){const i=W(),p=S(()=>i.theme==="dark");return{chartOption:S(()=>v(p.value))}}const dt=F({__name:"data-overview",setup(v){const i=y([]),p=y([]),c=y([]),n=y([]),d=r=>r.map(t=>{var _;return`<div class="content-panel">
        <p>
          <span style="background-color: ${t.color}" class="tooltip-item-icon"></span><span>${t.seriesName}</span>
        </p>
        <span class="tooltip-value">${(_=t.value)==null?void 0:_.toLocaleString()}</span>
      </div>`}).reverse().join(""),u=(r,t,_,O)=>({name:r,data:O,stack:"Total",type:"line",smooth:!0,symbol:"circle",symbolSize:10,itemStyle:{color:t},emphasis:{focus:"series",itemStyle:{color:t,borderWidth:2,borderColor:_}},lineStyle:{width:2,color:t},showSymbol:!1,areaStyle:{opacity:.1,color:t}}),{t:s}=K(),{loading:m,setLoading:b}=z(!0),{isDark:o}=pt(),l=S(()=>[{title:s("multiDAnalysis.dataOverview.contentProduction"),value:i.value.reduce((r,t)=>r+t,0),prefix:{icon:"icon-edit",background:o.value?"#593E2F":"#FFE4BA",iconColor:o.value?"#F29A43":"#F77234"}},{title:s("multiDAnalysis.dataOverview.contentClick"),value:p.value.reduce((r,t)=>r+t,0),prefix:{icon:"icon-thumb-up",background:o.value?"#3D5A62":"#E8FFFB",iconColor:o.value?"#6ED1CE":"#33D1C9"}},{title:s("multiDAnalysis.dataOverview.contentExposure"),value:c.value.reduce((r,t)=>r+t,0),prefix:{icon:"icon-heart",background:o.value?"#354276":"#E8F3FF",iconColor:o.value?"#4A7FF7":"#165DFF"}},{title:s("multiDAnalysis.dataOverview.activeUsers"),value:n.value.reduce((r,t)=>r+t,0),prefix:{icon:"icon-user",background:o.value?"#3F385E":"#F5E8FF",iconColor:o.value?"#8558D3":"#722ED1"}}]),f=y([]),{chartOption:E}=P(r=>({grid:{left:"2.6%",right:"4",top:"40",bottom:"40"},xAxis:{type:"category",offset:2,data:f.value,boundaryGap:!1,axisLabel:{color:"#4E5969",formatter(t,_){return _===0||_===f.value.length-1?"":`${t}`}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{show:!0,lineStyle:{color:"#23ADFF",width:2}}},yAxis:{type:"value",axisLine:{show:!1},axisLabel:{formatter(t,_){return _===0?String(t):`${t/1e3}k`}},splitLine:{lineStyle:{color:r?"#2E2E30":"#F2F3F5"}}},tooltip:{trigger:"axis",formatter(t){const[_]=t;return`<div>
            <p class="tooltip-title">${_.axisValueLabel}</p>
            ${d(t)}
          </div>`},className:"echarts-tooltip-diy"},graphic:{elements:[{type:"text",left:"2.6%",bottom:"18",style:{text:"12.10",textAlign:"center",fill:"#4E5969",fontSize:12}},{type:"text",right:"0",bottom:"18",style:{text:"12.17",textAlign:"center",fill:"#4E5969",fontSize:12}}]},series:[u("\u5185\u5BB9\u751F\u4EA7\u91CF","#722ED1","#F5E8FF",i.value),u("\u5185\u5BB9\u70B9\u51FB\u91CF","#F77234","#FFE4BA",p.value),u("\u5185\u5BB9\u66DD\u5149\u91CF","#33D1C9","#E8FFFB",c.value),u("\u6D3B\u8DC3\u7528\u6237\u6570","#3469FF","#E8F3FF",n.value)]}));return(async()=>{b(!0);try{const r=await ut();f.value=r.xAxis,r.data.forEach(t=>{t.name==="\u6587\u7AE0\u6570"?i.value=t.value:t.name==="\u70B9\u8D5E\u6570"?p.value=t.value:t.name==="\u9605\u8BFB\u6570"?c.value=t.value:t.name==="\u7528\u6237\u6570"&&(n.value=t.value)})}catch{}finally{b(!1)}})(),(r,t)=>{const _=Y,O=tt,j=et,M=k("Chart"),R=w,U=$;return h(),x(U,{loading:g(m),style:{width:"100%"}},{default:a(()=>[e(R,{class:"general-card",title:r.$t("multiDAnalysis.card.title.dataOverview")},{default:a(()=>[e(j,{justify:"space-between"},{default:a(()=>[(h(!0),q(Z,null,Q(g(l),(D,J)=>(h(),x(O,{key:J,span:6},{default:a(()=>[e(_,{title:D.title,value:D.value,"show-group-separator":"","value-from":0,animation:""},{prefix:a(()=>[I("span",{class:"statistic-prefix",style:N({background:D.prefix.background})},[(h(),x(X(D.prefix.icon),{style:N({color:D.prefix.iconColor})},null,8,["style"]))],4)]),_:2},1032,["title","value"])]),_:2},1024))),128))]),_:1}),e(M,{style:{height:"328px","margin-top":"20px"},option:g(E)},null,8,["option"])]),_:1},8,["title"])]),_:1},8,["loading"])}}});const _t=B(dt,[["__scopeId","data-v-94ff04d1"]]);function mt(){return A.post("/api/statistics/popular-note/list")}function ft(){return A.post("/api/statistics/popular-request/list")}const yt=F({__name:"user-actions",setup(v){const i=y();(async()=>{const n=await ft();i.value=n})();const{chartOption:c}=P(n=>{var d,u;return{grid:{left:44,right:20,top:0,bottom:20},xAxis:{type:"value",axisLabel:{show:!0,formatter(s,m){return m===0?String(s):`${Number(s)/1e3}k`}},splitLine:{lineStyle:{color:n?"#484849":"#E5E8EF"}}},yAxis:{type:"category",data:(d=i.value)==null?void 0:d.list.map(s=>s.url),axisLabel:{show:!0,color:"#4E5969"},axisTick:{show:!0,length:2,lineStyle:{color:"#A9AEB8"},alignWithLabel:!0},axisLine:{lineStyle:{color:n?"#484849":"#A9AEB8"}}},tooltip:{show:!0,trigger:"axis"},series:[{data:(u=i.value)==null?void 0:u.list.map(s=>s.count),type:"bar",barWidth:7,itemStyle:{color:"#4086FF",borderRadius:4}}]}});return(n,d)=>{const u=k("Chart"),s=w;return h(),x(s,{class:"general-card",title:"\u63A5\u53E3\u8BF7\u6C42\u6B21\u6570"},{default:a(()=>[e(u,{height:"366px",option:g(c)},null,8,["option"])]),_:1})}}}),ht=F({__name:"popular-author",setup(v){const{loading:i,setLoading:p}=z(),c=y({list:[]});return(async()=>{try{p(!0),c.value=await it()}catch{}finally{p(!1)}})(),(d,u)=>{const s=G,m=V,b=w,o=$;return h(),x(o,{loading:g(i),style:{width:"100%"}},{default:a(()=>[e(b,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:a(()=>[L(" \u70ED\u95E8\u4F5C\u8005 ")]),default:a(()=>[e(m,{data:c.value.list,pagination:!1,bordered:!1,style:{"margin-bottom":"20px"},scroll:{x:"100%",y:"350px"}},{columns:a(()=>[e(s,{title:"\u7528\u6237","data-index":"user.user"}),e(s,{title:"\u4F5C\u54C1\u6570","data-index":"note_count",sortable:{sortDirections:["ascend","descend"]}}),e(s,{title:"\u88AB\u559C\u6B22","data-index":"like_count",sortable:{sortDirections:["ascend","descend"]}})]),_:1},8,["data"])]),_:1})]),_:1},8,["loading"])}}});const vt=B(ht,[["__scopeId","data-v-48477200"]]),xt=F({__name:"content-period-analysis",setup(v){const i=o=>o.map(l=>`<div class="content-panel">
        <p>
          <span style="background-color: ${l.color}" class="tooltip-item-icon"></span>
          <span>${l.seriesName}</span>
        </p>
        <span class="tooltip-value">
        ${l.value}%
        </span>
      </div>`).join(""),{loading:p,setLoading:c}=z(!0),n=y([]),d=y([]),u=y([]),s=y([]),{chartOption:m}=P(o=>({grid:{left:"40",right:0,top:"20",bottom:"100"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:n.value,boundaryGap:!1,axisLine:{lineStyle:{color:o?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"},interval(l){return!(l===0||l===n.value.length-1)}},axisLabel:{color:"#86909C",formatter(l,f){return f===0||f===n.value.length-1?"":`${l}`}}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter:"{value}%"},splitLine:{lineStyle:{color:o?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(l){const[f]=l;return`<div>
            <p class="tooltip-title">${f.axisValueLabel}</p>
            ${i(l)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"\u5168\u90E8",data:d.value,type:"line",smooth:!0,showSymbol:!1,color:o?"#3D72F6":"#246EFF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E0E3FF"}}},{name:"\u56FE\u6587\u7C7B",data:u.value,type:"line",smooth:!0,showSymbol:!1,color:o?"#A079DC":"#00B2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E2F2FF"}}},{name:"\u89C6\u9891\u7C7B",data:s.value,type:"line",smooth:!0,showSymbol:!1,color:o?"#6CAAF5":"#81E2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#D9F6FF"}}}],dataZoom:[{bottom:40,type:"slider",left:40,right:14,height:14,borderColor:"transparent",handleIcon:"\u4E09",handleSize:"20",handleStyle:{shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:4},brushSelect:!1,backgroundColor:o?"#313132":"#F2F3F5"},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1}]}));return(async()=>{c(!0);try{const o=await ct();n.value=o.xAxis,o.data.forEach(l=>{l.name==="\u5168\u90E8"?d.value=l.value:l.name==="\u56FE\u6587\u7C7B"&&(u.value=l.value)})}catch{}finally{c(!1)}})(),(o,l)=>{const f=k("Chart"),E=w,C=$;return h(),x(C,{loading:g(p),style:{width:"100%"}},{default:a(()=>[e(E,{class:"general-card","header-style":{paddingBottom:"16px"}},{title:a(()=>[L(" \u5185\u5BB9\u53D1\u5E03\u65F6\u95F4\u5206\u6790 ")]),default:a(()=>[e(f,{style:{width:"100%",height:"370px"},option:g(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});const gt=B(xt,[["__scopeId","data-v-6e40aec9"]]),bt={class:"increases-cell"},Ft=F({__name:"popular-content",setup(v){const{loading:i,setLoading:p}=z(),c=y();return(async()=>{try{p(!0),c.value=await mt(),p(!1)}catch{}})(),(d,u)=>{const s=ot,m=G,b=st,o=V,l=H,f=w,E=$;return h(),x(E,{loading:g(i),style:{width:"100%"}},{default:a(()=>[e(f,{class:"general-card","header-style":{paddingBottom:"0"},"body-style":{padding:"17px 20px 21px 20px"}},{title:a(()=>[L(" \u70ED\u95E8\u5185\u5BB9 ")]),default:a(()=>[e(l,{direction:"vertical",size:10,fill:""},{default:a(()=>{var C,r;return[e(o,{data:(r=(C=c.value)==null?void 0:C.list)!=null?r:[],pagination:!1,bordered:!1,scroll:{x:"100%",y:"264px"}},{columns:a(()=>[e(m,{title:"\u5185\u5BB9\u6807\u9898","data-index":"title"},{cell:a(({record:t})=>[e(s,{ellipsis:{rows:1}},{default:a(()=>[L(T(t.note.title),1)]),_:2},1024)]),_:1}),e(m,{title:"\u88AB\u559C\u6B22","data-index":"like_count"}),e(m,{title:"\u88AB\u6536\u85CF","data-index":"collect_count"}),e(m,{title:"\u65E5\u6DA8\u5E45","data-index":"increases",sortable:{sortDirections:["ascend","descend"]}},{cell:a(({record:t})=>[I("div",bt,[I("span",null,T(t.increases)+"%",1),t.increases!==0?(h(),x(b,{key:0,style:{color:"#f53f3f","font-size":"8px"}})):at("",!0)])]),_:1})]),_:1},8,["data"])]}),_:1})]),_:1})]),_:1},8,["loading"])}}});const Et=B(Ft,[["__scopeId","data-v-88dec79a"]]),Ct={class:"container"},Dt={name:"MultiDimensionDataAnalysis"},At=F({...Dt,setup(v){return(i,p)=>{const c=k("Breadcrumb"),n=nt,d=rt,u=lt,s=H;return h(),q("div",Ct,[e(c,{items:["menu.visualization","menu.visualization.multiDimensionDataAnalysis"]},null,8,["items"]),e(s,{direction:"vertical",size:16,fill:""},{default:a(()=>[e(d,{cols:24,"col-gap":16,"row-gap":16},{default:a(()=>[e(n,{span:{xs:24,sm:24,md:24,lg:18,xl:18,xxl:18}},{default:a(()=>[e(_t)]),_:1}),e(n,{span:{xs:24,sm:24,md:24,lg:6,xl:6,xxl:6}},{default:a(()=>[e(yt,{style:{"margin-bottom":"16px"}})]),_:1})]),_:1}),e(gt),e(n,{span:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24}},{default:a(()=>[e(u)]),_:1}),e(s,{direction:"horizontal",size:16,wrap:""},{default:a(()=>[e(d,{cols:24,"col-gap":16,"row-gap":16},{default:a(()=>[e(n,{span:{xs:24,sm:24,md:24,lg:12,xl:12,xxl:12}},{default:a(()=>[e(vt)]),_:1}),e(n,{span:{xs:24,sm:24,md:24,lg:12,xl:12,xxl:12}},{default:a(()=>[e(Et)]),_:1})]),_:1})]),_:1})]),_:1})])}}});const Ht=B(At,[["__scopeId","data-v-f2d5abd0"]]);export{Ht as default};
