import{x as j,u as be,q as ge,y as he,i as ye,z as Ce,_ as Be}from"./index.140309e9.js";/* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                */import{c as I,S as xe}from"./sortable.esm.6d838f6a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{d as Fe,e as v,r as Te,c as S,w as Ve,a_ as ke,bL as we,B as d,C as g,aH as e,aG as a,aL as b,aM as p,F as m,aJ as P,aI as q,u as O,aD as R,D as ze,bn as Ie,aU as Se,n as De,b3 as Ae,b4 as Ee,bB as Ne,bM as Ue,bC as Le,b9 as $e,bK as Me,ab as Pe,aV as qe,b8 as Oe,bj as Re,bk as je,bl as Ge,b6 as He,bO as Je,bG as Ke,bD as Qe,bP as We}from"./arco.bbdacfc8.js";import{u as Xe}from"./loading.b4b50533.js";import"./chart.6ce23b19.js";import"./vue.67b87df8.js";function Ye(B){return j.post("/api/Notice/admin/query/list",{...B})}function Ze(B){return j.post("/api/Notice/admin/add",B)}const ea={class:"container"},aa={class:"action-icon"},ta={class:"action-icon"},oa={id:"tableSetting"},la={style:{"margin-right":"4px",cursor:"move"}},na={class:"title"},sa={key:0,class:"circle"},ia={key:1,class:"circle pass"},ua={name:"ManageNotice"},ca=Fe({...ua,setup(B){const c=v({type:"system",topic:"",description:"",is_read:!1,from:"system",to:"all"}),h=v(!1),G=()=>{h.value=!0},H=async()=>{await Ze(c.value),Se.success("\u521B\u5EFA\u6210\u529F"),h.value=!1},J=()=>{h.value=!1},D=()=>({_id:"",type:"",contentType:"",filterType:"",createdTime:[],is_read:!1}),{loading:K,setLoading:A}=Xe(!0),{t:r}=be(),E=v([]),i=v(D()),_=v([]),x=v([]),T=v("medium"),F={pageCurrent:1,pageSize:20},y=Te({...F}),Q=S(()=>[{type:r("searchTable.size.mini"),value:"mini"},{type:r("searchTable.size.small"),value:"small"},{type:r("searchTable.size.medium"),value:"medium"},{type:r("searchTable.size.large"),value:"large"}]),W=S(()=>[{title:r("searchTable.columns.index"),dataIndex:"index",slotName:"index"},{title:r("searchTable.columns.number"),dataIndex:"_id"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:r("searchTable.columns.createdTime"),dataIndex:"created"},{title:r("searchTable.columns.status"),dataIndex:"is_read",slotName:"status"}]);S(()=>[{label:"\u5DF2\u8BFB",value:!0},{label:"\u672A\u8BFB",value:!1}]);const V=async(l={pageCurrent:1,pageSize:20})=>{A(!0);try{const t=await Ye(l);E.value=t.list,y.pageCurrent=l.pageCurrent,y.total=t.totalCount}catch{}finally{A(!1)}},N=()=>{V({pageCurrent:F.pageCurrent,pageSize:F.pageSize,...i.value})},X=l=>{V({...F,pageCurrent:l})};V();const Y=()=>{i.value=D()},Z=(l,t)=>{T.value=l},ee=(l,t,u)=>{l?_.value.splice(u,0,t):_.value=x.value.filter(s=>s.dataIndex!==t.dataIndex)},U=(l,t,u,s=!1)=>{const n=s?I(l):l;return t>-1&&u>-1&&n.splice(t,1,n.splice(u,1,n[t]).pop()),n},ae=l=>{l&&De(()=>{const t=document.getElementById("tableSetting");new xe(t,{onEnd(u){const{oldIndex:s,newIndex:n}=u;U(_.value,s,n),U(x.value,s,n)}})})};return Ve(()=>W.value,l=>{_.value=I(l),_.value.forEach((t,u)=>{t.checked=!0}),x.value=I(_.value)},{deep:!0,immediate:!0}),(l,t)=>{const u=ke("Breadcrumb"),s=Ae,n=Ee,f=Ne,te=Ue,k=Le,L=$e,$=Me,oe=Pe,C=qe,M=ge,le=Oe,w=Re,ne=he,se=je,ie=Ge,ue=ye,ce=Ce,re=He,de=Je,pe=Ke,me=Qe,_e=We,fe=we("permission");return d(),g("div",ea,[e(u,{items:["\u901A\u77E5\u7BA1\u7406","\u5217\u8868"]}),e(me,{class:"general-card",title:"\u901A\u77E5\u5217\u8868"},{default:a(()=>[e(k,null,{default:a(()=>[e(f,{flex:1},{default:a(()=>[e(L,{model:i.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(k,{gutter:16},{default:a(()=>[e(f,{span:8},{default:a(()=>[e(n,{field:"_id",label:"\u7F16\u53F7"},{default:a(()=>[e(s,{modelValue:i.value._id,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value._id=o),placeholder:l.$t("searchTable.form.number.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(n,{field:"type",label:"\u7C7B\u578B"},{default:a(()=>[e(s,{modelValue:i.value.type,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value.type=o),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:8},{default:a(()=>[e(n,{field:"createdTime",label:l.$t("searchTable.form.createdTime")},{default:a(()=>[e(te,{modelValue:i.value.createdTime,"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.createdTime=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($,{style:{height:"84px"},direction:"vertical"}),e(f,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(le,{direction:"vertical",size:18},{default:a(()=>[e(C,{type:"primary",onClick:N},{icon:a(()=>[e(oe)]),default:a(()=>[b(" "+p(l.$t("searchTable.form.search")),1)]),_:1}),e(C,{onClick:Y},{icon:a(()=>[e(M)]),default:a(()=>[b(" "+p(l.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e($,{style:{"margin-top":"0"}}),e(k,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(f,{span:12}),e(f,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(C,{type:"primary",style:{"margin-right":"12px"},onClick:G},{default:a(()=>[b(p("\u65B0\u5EFA"))]),_:1}),e(w,{content:l.$t("searchTable.actions.refresh")},{default:a(()=>[m("div",{class:"action-icon",onClick:N},[e(M,{size:"18"})])]),_:1},8,["content"]),e(ie,{onSelect:Z},{content:a(()=>[(d(!0),g(P,null,q(O(Q),o=>(d(),R(se,{key:o.value,value:o.value,class:ze({active:o.value===T.value})},{default:a(()=>[m("span",null,p(o.type),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(w,{content:l.$t("searchTable.actions.density")},{default:a(()=>[m("div",aa,[e(ne,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(w,{content:l.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(de,{trigger:"click",position:"bl",onPopupVisibleChange:ae},{content:a(()=>[m("div",oa,[(d(!0),g(P,null,q(x.value,(o,ve)=>(d(),g("div",{key:o.dataIndex,class:"setting"},[m("div",la,[e(ce)]),m("div",null,[e(re,{modelValue:o.checked,"onUpdate:modelValue":z=>o.checked=z,onChange:z=>ee(z,o,ve)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),m("div",na,p(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:a(()=>[m("div",ta,[e(ue,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(pe,{"row-key":"id",loading:O(K),pagination:y,columns:_.value,data:E.value,bordered:!1,size:T.value,onPageChange:X},{index:a(({rowIndex:o})=>[b(p(o+1+(y.pageCurrent-1)*y.pageSize),1)]),status:a(({record:o})=>[o.is_read===!1?(d(),g("span",sa)):(d(),g("span",ia)),b(" "+p(o.is_read===!1?"\u672A\u8BFB":"\u5DF2\u8BFB"),1)]),operations:a(()=>[e(C,{type:"text",size:"small"},{default:a(()=>[b(p(l.$t("searchTable.columns.operations.view")),1)]),_:1}),Ie((d(),R(C,{type:"text",size:"small"},{default:a(()=>[b(" \u66F4\u65B0 ")]),_:1})),[[fe,["admin"]]])]),_:1},8,["loading","pagination","columns","data","size"])]),_:1}),e(_e,{visible:h.value,"onUpdate:visible":t[6]||(t[6]=o=>h.value=o),title:"\u65B0\u5EFA",onOk:H,onCancel:J},{default:a(()=>[e(L,{model:c.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(n,{field:"type",label:"\u7C7B\u578B"},{default:a(()=>[e(s,{modelValue:c.value.type,"onUpdate:modelValue":t[3]||(t[3]=o=>c.value.type=o),disabled:""},null,8,["modelValue"])]),_:1}),e(n,{field:"topic",label:"\u4E3B\u9898"},{default:a(()=>[e(s,{modelValue:c.value.topic,"onUpdate:modelValue":t[4]||(t[4]=o=>c.value.topic=o)},null,8,["modelValue"])]),_:1}),e(n,{field:"description",label:"\u63CF\u8FF0"},{default:a(()=>[e(s,{modelValue:c.value.description,"onUpdate:modelValue":t[5]||(t[5]=o=>c.value.description=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const Sa=Be(ca,[["__scopeId","data-v-141396ed"]]);export{Sa as default};
