import{x as pe,u as me,q as _e,y as fe,i as be,z as ve,_ as ge}from"./index.140309e9.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                */import{c as V,S as he}from"./sortable.esm.6d838f6a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{d as ye,e as v,r as xe,c as z,w as Be,a_ as Ce,bL as Te,B as d,C as f,aH as e,aG as t,u as w,aL as g,aM as _,F as p,aJ as U,aI as M,aD as P,D as Ie,bn as ke,n as Ve,b3 as ze,b4 as we,bB as Fe,bM as Se,bN as De,bC as $e,b9 as Ae,bK as Le,ab as Ne,aV as Ee,b8 as Ue,bj as Me,bk as Pe,bl as qe,b6 as Re,bO as je,bG as Ge,bD as He}from"./arco.bbdacfc8.js";import{u as Oe}from"./loading.b4b50533.js";import"./chart.6ce23b19.js";import"./vue.67b87df8.js";function Je(F){return pe.post("/api/note/query/list",{...F})}const Ke={class:"container"},Qe={class:"action-icon"},We={class:"action-icon"},Xe={id:"tableSetting"},Ye={style:{"margin-right":"4px",cursor:"move"}},Ze={class:"title"},et={key:0,class:"circle"},tt={key:1,class:"circle pass"},at={name:"ManageNote"},nt=ye({...at,setup(F){const S=()=>({number:"",title:"",filterType:"",createdTime:[],status:""}),{loading:q,setLoading:D}=Oe(!0),{t:i}=me(),$=v([]),s=v(S()),m=v([]),h=v([]),x=v("medium"),y={pageCurrent:1,pageSize:20},b=xe({...y}),R=z(()=>[{name:i("searchTable.size.mini"),value:"mini"},{name:i("searchTable.size.small"),value:"small"},{name:i("searchTable.size.medium"),value:"medium"},{name:i("searchTable.size.large"),value:"large"}]),j=z(()=>[{title:i("searchTable.columns.index"),dataIndex:"index",slotName:"index"},{title:"\u5185\u5BB9id",dataIndex:"_id"},{title:"\u5185\u5BB9\u6807\u9898",dataIndex:"title"},{title:"\u56FE\u7247\u6570",dataIndex:"pic_list.length"},{title:"\u88AB\u9605\u8BFB",dataIndex:"read_count"},{title:"\u88AB\u559C\u6B22",dataIndex:"like_count"},{title:"\u88AB\u8BC4\u8BBA",dataIndex:"comment_count"},{title:"\u88AB\u6536\u85CF",dataIndex:"collect_count"},{title:i("searchTable.columns.createdTime"),dataIndex:"created_at"},{title:i("searchTable.columns.status"),dataIndex:"status",slotName:"status"},{title:i("searchTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),G=z(()=>[{label:i("searchTable.form.status.online"),value:"online"},{label:i("searchTable.form.status.offline"),value:"offline"}]),B=async(a={pageCurrent:1,pageSize:20})=>{D(!0);try{const n=await Je(a);$.value=n.noteList,b.pageCurrent=a.pageCurrent,b.total=n.totalCount}catch{}finally{D(!1)}},A=()=>{B({pageCurrent:y.pageCurrent,pageSize:y.pageSize,...s.value})},H=a=>{B({...y,pageCurrent:a})};B();const O=()=>{s.value=S()},J=(a,n)=>{x.value=a},K=(a,n,c)=>{a?m.value.splice(c,0,n):m.value=h.value.filter(u=>u.dataIndex!==n.dataIndex)},L=(a,n,c,u=!1)=>{const l=u?V(a):a;return n>-1&&c>-1&&l.splice(n,1,l.splice(c,1,l[n]).pop()),l},Q=a=>{a&&Ve(()=>{const n=document.getElementById("tableSetting");new he(n,{onEnd(c){const{oldIndex:u,newIndex:l}=c;L(m.value,u,l),L(h.value,u,l)}})})};return Be(()=>j.value,a=>{m.value=V(a),m.value.forEach((n,c)=>{n.checked=!0}),h.value=V(m.value)},{deep:!0,immediate:!0}),(a,n)=>{const c=Ce("Breadcrumb"),u=ze,l=we,r=Fe,W=Se,X=De,C=$e,Y=Ae,N=Le,Z=Ne,T=Ee,E=_e,ee=Ue,I=Me,te=fe,ae=Pe,ne=qe,oe=be,le=ve,se=Re,ie=je,ce=Ge,ue=He,re=Te("permission");return d(),f("div",Ke,[e(c,{items:["\u5185\u5BB9\u7BA1\u7406","\u5217\u8868"]}),e(ue,{class:"general-card",title:"\u5185\u5BB9\u5217\u8868"},{default:t(()=>[e(C,null,{default:t(()=>[e(r,{flex:1},{default:t(()=>[e(Y,{model:s.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(C,{gutter:16},{default:t(()=>[e(r,{span:8},{default:t(()=>[e(l,{field:"number",label:"\u7F16\u53F7"},{default:t(()=>[e(u,{modelValue:s.value.number,"onUpdate:modelValue":n[0]||(n[0]=o=>s.value.number=o),placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:t(()=>[e(l,{field:"title",label:"\u6807\u9898"},{default:t(()=>[e(u,{modelValue:s.value.title,"onUpdate:modelValue":n[1]||(n[1]=o=>s.value.title=o),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:t(()=>[e(l,{field:"createdTime",label:a.$t("searchTable.form.createdTime")},{default:t(()=>[e(W,{modelValue:s.value.createdTime,"onUpdate:modelValue":n[2]||(n[2]=o=>s.value.createdTime=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:t(()=>[e(l,{field:"status",label:a.$t("searchTable.form.status")},{default:t(()=>[e(X,{modelValue:s.value.status,"onUpdate:modelValue":n[3]||(n[3]=o=>s.value.status=o),options:w(G),placeholder:a.$t("searchTable.form.selectDefault")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{style:{height:"84px"},direction:"vertical"}),e(r,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(ee,{direction:"vertical",size:18},{default:t(()=>[e(T,{type:"primary",onClick:A},{icon:t(()=>[e(Z)]),default:t(()=>[g(" "+_(a.$t("searchTable.form.search")),1)]),_:1}),e(T,{onClick:O},{icon:t(()=>[e(E)]),default:t(()=>[g(" "+_(a.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{style:{"margin-top":"0"}}),e(C,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(r,{span:12}),e(r,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[e(I,{content:a.$t("searchTable.actions.refresh")},{default:t(()=>[p("div",{class:"action-icon",onClick:A},[e(E,{size:"18"})])]),_:1},8,["content"]),e(ne,{onSelect:J},{content:t(()=>[(d(!0),f(U,null,M(w(R),o=>(d(),P(ae,{key:o.value,value:o.value,class:Ie({active:o.value===x.value})},{default:t(()=>[p("span",null,_(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(I,{content:a.$t("searchTable.actions.density")},{default:t(()=>[p("div",Qe,[e(te,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(I,{content:a.$t("searchTable.actions.columnSetting")},{default:t(()=>[e(ie,{trigger:"click",position:"bl",onPopupVisibleChange:Q},{content:t(()=>[p("div",Xe,[(d(!0),f(U,null,M(h.value,(o,de)=>(d(),f("div",{key:o.dataIndex,class:"setting"},[p("div",Ye,[e(le)]),p("div",null,[e(se,{modelValue:o.checked,"onUpdate:modelValue":k=>o.checked=k,onChange:k=>K(k,o,de)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),p("div",Ze,_(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:t(()=>[p("div",We,[e(oe,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ce,{"row-key":"id",loading:w(q),pagination:b,columns:m.value,data:$.value,bordered:!1,size:x.value,onPageChange:H},{index:t(({rowIndex:o})=>[g(_(o+1+(b.pageCurrent-1)*b.pageSize),1)]),status:t(({record:o})=>[o.status==="offline"?(d(),f("span",et)):(d(),f("span",tt)),g(" "+_(a.$t(`searchTable.form.status.${o.status}`)),1)]),operations:t(()=>[ke((d(),P(T,{type:"text",size:"small"},{default:t(()=>[g(_(a.$t("searchTable.columns.operations.view")),1)]),_:1})),[[re,["admin"]]])]),_:1},8,["loading","pagination","columns","data","size"])]),_:1})])}}});const Tt=ge(nt,[["__scopeId","data-v-252cfb53"]]);export{Tt as default};
