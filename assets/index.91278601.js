import{x as G,u as he,q as Te,A as Ce,y as ye,i as Ve,z as xe,_ as Be}from"./index.140309e9.js";/* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                */import{c as w,S as Ee}from"./sortable.esm.6d838f6a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{d as ke,e as v,r as Fe,c as z,w as De,a_ as Ie,B as b,C as g,aH as e,aG as a,u as y,aL as p,aM as m,F as _,aJ as R,aI as j,aD as we,D as ze,aU as Se,n as $e,b3 as Ue,b4 as Ae,bB as Me,bM as Le,bN as Ne,bC as Pe,b9 as Oe,bK as qe,ab as Re,aV as je,b8 as Ge,bj as He,bk as Je,bl as Ke,b6 as Qe,bO as We,bG as Xe,bD as Ye,aS as Ze,bP as ea}from"./arco.bbdacfc8.js";import{u as aa}from"./loading.b4b50533.js";import"./chart.6ce23b19.js";import"./vue.67b87df8.js";function ta(V){return G.post("/api/tag/admin/query/list",{...V})}function la(V,s){return G.post(`/api/tag/admin/edit/${V}`,s)}const oa={class:"container"},na={class:"action-icon"},sa={class:"action-icon"},ua={id:"tableSetting"},ia={style:{"margin-right":"4px",cursor:"move"}},ca={class:"title"},ra={key:0,class:"circle"},da={key:1,class:"circle pass"},pa={name:"ManageTag"},ma=ke({...pa,setup(V){const s=v({_id:"",name:"",description:"",heat:0,reference_count:0,created:""}),h=v(!1),H=o=>{h.value=!0,s.value={...o}},J=async()=>{h.value=!1,await la(s.value._id,s.value),Se.success("\u7F16\u8F91\u6210\u529F"),E()},K=()=>{h.value=!1},S=()=>({_id:"",name:"",contentType:"",filterType:"",createdTime:[],status:""}),{loading:Q,setLoading:$}=aa(!0),{t:u}=he(),U=v([]),i=v(S()),f=v([]),x=v([]),k=v("medium"),B={pageCurrent:1,pageSize:20},T=Fe({...B}),W=z(()=>[{name:u("searchTable.size.mini"),value:"mini"},{name:u("searchTable.size.small"),value:"small"},{name:u("searchTable.size.medium"),value:"medium"},{name:u("searchTable.size.large"),value:"large"}]),X=z(()=>[{title:u("searchTable.columns.index"),dataIndex:"index",slotName:"index"},{title:"\u6807\u7B7E\u7F16\u53F7",dataIndex:"_id"},{title:"\u6807\u7B7E\u540D\u79F0",dataIndex:"name"},{title:"\u4ECB\u7ECD",dataIndex:"description"},{title:"\u70ED\u5EA6",dataIndex:"heat"},{title:"\u88AB\u5F15\u7528\u6B21\u6570",dataIndex:"reference_count"},{title:u("searchTable.columns.createdTime"),dataIndex:"created"},{title:u("searchTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),Y=z(()=>[{label:u("searchTable.form.status.normal"),value:"normal"},{label:u("searchTable.form.status.deleted"),value:"abnormal"},{label:u("searchTable.form.status.blocked"),value:"blocked"}]),E=async(o={pageCurrent:1,pageSize:20})=>{$(!0);try{const l=await ta(o);U.value=l.list,T.pageCurrent=o.pageCurrent,T.total=l.totalCount}catch{}finally{$(!1)}},A=()=>{E({pageCurrent:B.pageCurrent,pageSize:B.pageSize,...i.value})},Z=o=>{E({...B,pageCurrent:o})};E();const ee=()=>{i.value=S()},ae=(o,l)=>{k.value=o},te=(o,l,r)=>{o?f.value.splice(r,0,l):f.value=x.value.filter(c=>c.dataIndex!==l.dataIndex)},M=(o,l,r,c=!1)=>{const n=c?w(o):o;return l>-1&&r>-1&&n.splice(l,1,n.splice(r,1,n[l]).pop()),n},le=o=>{o&&$e(()=>{const l=document.getElementById("tableSetting");new Ee(l,{onEnd(r){const{oldIndex:c,newIndex:n}=r;M(f.value,c,n),M(x.value,c,n)}})})};return De(()=>X.value,o=>{f.value=w(o),f.value.forEach((l,r)=>{l.checked=!0}),x.value=w(f.value)},{deep:!0,immediate:!0}),(o,l)=>{const r=Ie("Breadcrumb"),c=Ue,n=Ae,d=Me,oe=Le,ne=Ne,F=Pe,L=Oe,N=qe,se=Re,C=je,P=Te,ue=Ge,ie=Ce,D=He,ce=ye,re=Je,de=Ke,pe=Ve,me=xe,_e=Qe,fe=We,ve=Xe,be=Ye,O=Ze,ge=ea;return b(),g("div",oa,[e(r,{items:["\u6807\u7B7E\u7BA1\u7406","\u5217\u8868"]}),e(be,{class:"general-card",title:"\u6807\u7B7E\u5217\u8868"},{default:a(()=>[e(F,null,{default:a(()=>[e(d,{flex:1},{default:a(()=>[e(L,{model:i.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(F,{gutter:16},{default:a(()=>[e(d,{span:8},{default:a(()=>[e(n,{field:"_id",label:"\u6807\u7B7E\u7F16\u53F7"},{default:a(()=>[e(c,{modelValue:i.value._id,"onUpdate:modelValue":l[0]||(l[0]=t=>i.value._id=t),placeholder:"\u6807\u7B7E\u7F16\u53F7"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8},{default:a(()=>[e(n,{field:"name",label:"\u6807\u7B7E\u540D\u79F0"},{default:a(()=>[e(c,{modelValue:i.value.name,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value.name=t),placeholder:"\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8},{default:a(()=>[e(n,{field:"createdTime",label:o.$t("searchTable.form.createdTime")},{default:a(()=>[e(oe,{modelValue:i.value.createdTime,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value.createdTime=t),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(n,{field:"status",label:o.$t("searchTable.form.status")},{default:a(()=>[e(ne,{modelValue:i.value.status,"onUpdate:modelValue":l[3]||(l[3]=t=>i.value.status=t),options:y(Y),placeholder:o.$t("searchTable.form.selectDefault")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{style:{height:"84px"},direction:"vertical"}),e(d,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(ue,{direction:"vertical",size:18},{default:a(()=>[e(C,{type:"primary",onClick:A},{icon:a(()=>[e(se)]),default:a(()=>[p(" "+m(o.$t("searchTable.form.search")),1)]),_:1}),e(C,{onClick:ee},{icon:a(()=>[e(P)]),default:a(()=>[p(" "+m(o.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{style:{"margin-top":"0"}}),e(F,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(d,{span:12}),e(d,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(C,null,{icon:a(()=>[e(ie)]),default:a(()=>[p(" "+m(o.$t("searchTable.operation.download")),1)]),_:1}),e(D,{content:o.$t("searchTable.actions.refresh")},{default:a(()=>[_("div",{class:"action-icon",onClick:A},[e(P,{size:"18"})])]),_:1},8,["content"]),e(de,{onSelect:ae},{content:a(()=>[(b(!0),g(R,null,j(y(W),t=>(b(),we(re,{key:t.value,value:t.value,class:ze({active:t.value===k.value})},{default:a(()=>[_("span",null,m(t.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(D,{content:o.$t("searchTable.actions.density")},{default:a(()=>[_("div",na,[e(ce,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(D,{content:o.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(fe,{trigger:"click",position:"bl",onPopupVisibleChange:le},{content:a(()=>[_("div",ua,[(b(!0),g(R,null,j(x.value,(t,q)=>(b(),g("div",{key:t.dataIndex,class:"setting"},[_("div",ia,[e(me)]),_("div",null,[e(_e,{modelValue:t.checked,"onUpdate:modelValue":I=>t.checked=I,onChange:I=>te(I,t,q)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_("div",ca,m(t.title==="#"?"\u5E8F\u5217\u53F7":t.title),1)]))),128))])]),default:a(()=>[_("div",sa,[e(pe,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ve,{"row-key":"id",loading:y(Q),pagination:T,columns:f.value,data:U.value,bordered:!1,size:k.value,onPageChange:Z},{index:a(({rowIndex:t})=>[p(m(t+1+(T.pageCurrent-1)*T.pageSize),1)]),status:a(({record:t})=>[t.status==="offline"?(b(),g("span",ra)):(b(),g("span",da)),p(" "+m(o.$t(`searchTable.form.status.${t.status}`)),1)]),operations:a(({record:t})=>[e(C,{type:"text",size:"small"},{default:a(()=>[p(m(o.$t("searchTable.columns.operations.view")),1)]),_:1}),e(C,{type:"text",size:"small",onClick:q=>H(t)},{default:a(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size"])]),_:1}),e(ge,{visible:h.value,"onUpdate:visible":l[8]||(l[8]=t=>h.value=t),onOk:J,onCancel:K},{title:a(()=>[p(" \u7F16\u8F91\u6807\u7B7E ")]),default:a(()=>[e(L,{model:s.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(n,{field:"name",label:"\u6807\u7B7E\u540D\u79F0"},{default:a(()=>[e(c,{modelValue:s.value.name,"onUpdate:modelValue":l[4]||(l[4]=t=>s.value.name=t),placeholder:y(u)("searchTable.form.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),e(n,{field:"description",label:"\u4ECB\u7ECD"},{default:a(()=>[e(c,{modelValue:s.value.description,"onUpdate:modelValue":l[5]||(l[5]=t=>s.value.description=t),placeholder:"\u4ECB\u7ECD"},null,8,["modelValue"])]),_:1}),e(n,{field:"heat",label:"\u70ED\u5EA6"},{default:a(()=>[e(O,{modelValue:s.value.heat,"onUpdate:modelValue":l[6]||(l[6]=t=>s.value.heat=t),placeholder:"\u70ED\u5EA6"},null,8,["modelValue"])]),_:1}),e(n,{field:"reference_count",label:"\u88AB\u5F15\u7528\u6B21\u6570"},{default:a(()=>[e(O,{modelValue:s.value.reference_count,"onUpdate:modelValue":l[7]||(l[7]=t=>s.value.reference_count=t),placeholder:y(u)("searchTable.form.reference_count.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const Ua=Be(ma,[["__scopeId","data-v-1ae1cebf"]]);export{Ua as default};
