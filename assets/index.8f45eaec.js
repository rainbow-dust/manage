import{x as ie,u as re,q as de,y as ue,i as pe,z as _e,_ as me}from"./index.140309e9.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css                */import{c as k,S as ge}from"./sortable.esm.6d838f6a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               */import{d as fe,e as m,r as ve,c as A,w as he,a_ as be,B as g,C as b,aH as e,aG as t,aL as D,aM as f,F as i,aJ as M,aI as N,u as P,aD as xe,D as Ce,n as ye,b3 as Ie,b4 as Te,bB as ke,bM as De,bC as ze,b9 as Se,bK as we,ab as Be,aV as Ve,b8 as Fe,bj as Ee,bk as $e,bl as Le,b6 as Ae,bO as Me,bG as Ne,bD as Pe}from"./arco.bbdacfc8.js";import{u as Ue}from"./loading.b4b50533.js";import"./chart.6ce23b19.js";import"./vue.67b87df8.js";function qe(z){return ie.post("/api/statistics/statistic-actions/query/list",z)}const Re={class:"container"},je={class:"action-icon"},Ge={class:"action-icon"},He={id:"tableSetting"},Je={style:{"margin-right":"4px",cursor:"move"}},Oe={class:"title"},Ke={name:"ManageComment"},Qe=fe({...Ke,setup(z){const S=()=>({_id:"",content:"",contentType:"",filterType:"",createdTime:[]}),{loading:U,setLoading:w}=Ue(!0),{t:u}=re(),B=m([]),r=m(S()),d=m([]),v=m([]),x=m("medium"),h={pageCurrent:1,pageSize:20},_=ve({...h}),q=A(()=>[{content:u("searchTable.size.mini"),value:"mini"},{content:u("searchTable.size.small"),value:"small"},{content:u("searchTable.size.medium"),value:"medium"},{content:u("searchTable.size.large"),value:"large"}]),R=A(()=>[{title:u("searchTable.columns.index"),dataIndex:"index",slotName:"index"},{title:"ID",dataIndex:"_id"},{title:"\u7528\u6237",dataIndex:"user"},{title:"\u8BBE\u5907",dataIndex:"device"},{title:"\u65F6\u95F4",dataIndex:"time_stamp"},{title:"\u9875\u9762",dataIndex:"page_url"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u64CD\u4F5C",dataIndex:"action"},{title:"\u989D\u5916\u6570\u636E",dataIndex:'JSON.stringify("extra_data_for_event")'},{title:"\u6279\u6B21ID",dataIndex:"patch_id"},{title:u("searchTable.columns.createdTime"),dataIndex:"created_at"}]),C=async(a={pageCurrent:1,pageSize:20})=>{w(!0);try{const n=await qe(a);B.value=n.list,_.pageCurrent=a.pageCurrent,_.total=n.totalCount}catch{}finally{w(!1)}},V=()=>{C({pageCurrent:h.pageCurrent,pageSize:h.pageSize,...r.value})},j=a=>{C({...h,pageCurrent:a})};C();const G=()=>{r.value=S()},H=(a,n)=>{x.value=a},J=(a,n,l)=>{a?d.value.splice(l,0,n):d.value=v.value.filter(c=>c.dataIndex!==n.dataIndex)},F=(a,n,l,c=!1)=>{const s=c?k(a):a;return n>-1&&l>-1&&s.splice(n,1,s.splice(l,1,s[n]).pop()),s},O=a=>{a&&ye(()=>{const n=document.getElementById("tableSetting");new ge(n,{onEnd(l){const{oldIndex:c,newIndex:s}=l;F(d.value,c,s),F(v.value,c,s)}})})};return he(()=>R.value,a=>{d.value=k(a),d.value.forEach((n,l)=>{n.checked=!0}),v.value=k(d.value)},{deep:!0,immediate:!0}),(a,n)=>{const l=be("Breadcrumb"),c=Ie,s=Te,p=ke,K=De,y=ze,Q=Se,E=we,W=Be,$=Ve,L=de,X=Fe,I=Ee,Y=ue,Z=$e,ee=Le,te=pe,ae=_e,ne=Ae,oe=Me,se=Ne,le=Pe;return g(),b("div",Re,[e(l,{items:["\u7BA1\u7406","\u65E5\u5FD7"]}),e(le,{class:"general-card",title:"\u65E5\u5FD7\u5217\u8868"},{default:t(()=>[e(y,null,{default:t(()=>[e(p,{flex:1},{default:t(()=>[e(Q,{model:r.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(y,{gutter:16},{default:t(()=>[e(p,{span:8},{default:t(()=>[e(s,{field:"_id",label:"ID"},{default:t(()=>[e(c,{modelValue:r.value._id,"onUpdate:modelValue":n[0]||(n[0]=o=>r.value._id=o),placeholder:a.$t("searchTable.form.number.placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(p,{span:8},{default:t(()=>[e(s,{field:"createdTime",label:a.$t("searchTable.form.createdTime")},{default:t(()=>[e(K,{modelValue:r.value.createdTime,"onUpdate:modelValue":n[1]||(n[1]=o=>r.value.createdTime=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(E,{style:{height:"84px"},direction:"vertical"}),e(p,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(X,{direction:"vertical",size:18},{default:t(()=>[e($,{type:"primary",onClick:V},{icon:t(()=>[e(W)]),default:t(()=>[D(" "+f(a.$t("searchTable.form.search")),1)]),_:1}),e($,{onClick:G},{icon:t(()=>[e(L)]),default:t(()=>[D(" "+f(a.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{style:{"margin-top":"0"}}),e(y,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(p,{span:12}),e(p,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[e(I,{content:a.$t("searchTable.actions.refresh")},{default:t(()=>[i("div",{class:"action-icon",onClick:V},[e(L,{size:"18"})])]),_:1},8,["content"]),e(ee,{onSelect:H},{content:t(()=>[(g(!0),b(M,null,N(P(q),o=>(g(),xe(Z,{key:o.value,value:o.value,class:Ce({active:o.value===x.value})},{default:t(()=>[i("span",null,f(o.content),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(I,{content:a.$t("searchTable.actions.density")},{default:t(()=>[i("div",je,[e(Y,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(I,{content:a.$t("searchTable.actions.columnSetting")},{default:t(()=>[e(oe,{trigger:"click",position:"bl",onPopupVisibleChange:O},{content:t(()=>[i("div",He,[(g(!0),b(M,null,N(v.value,(o,ce)=>(g(),b("div",{key:o.dataIndex,class:"setting"},[i("div",Je,[e(ae)]),i("div",null,[e(ne,{modelValue:o.checked,"onUpdate:modelValue":T=>o.checked=T,onChange:T=>J(T,o,ce)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),i("div",Oe,f(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:t(()=>[i("div",Ge,[e(te,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(se,{"row-key":"id",loading:P(U),pagination:_,columns:d.value,data:B.value,bordered:!1,size:x.value,onPageChange:j},{index:t(({rowIndex:o})=>[D(f(o+1+(_.pageCurrent-1)*_.pageSize),1)]),_:1},8,["loading","pagination","columns","data","size"])]),_:1})])}}});const ft=me(Qe,[["__scopeId","data-v-9bbe11c8"]]);export{ft as default};
